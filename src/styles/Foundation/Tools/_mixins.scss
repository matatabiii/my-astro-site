@use 'sass:map'; // sassの機能
@use '../Settings/variable' as *;
@use './functions' as *;

/// ホバー、フォーカス
/// @param {string}  $action  疑似クラス
@mixin action($action: 'full', $underline: none) {
  @at-root {
    @media (any-hover: hover) {
      &:hover {
        @content;
        text-decoration: $underline;
      }
    }
    @if ($action != 'hover') {
      &:focus-visible {
        @content;
      }
    }
  }
}

/// テキストの境界線
/// 16分割して滑らか感をだす
/// function _text-outline のラッパー
/// https://www.chatwork.com/#!rid29164628-1972186661
/// @param {number} $width        大きさ
/// @param {string} $color        カラーコード
/// @param {string} $chain-before 連鎖させる値(前)
/// @param {string} $chain-after  連鎖させる値(後)
@mixin text-outline($width: 1px, $color: color('font'), $chain-before: null, $chain-after: null) {
  text-shadow: text-outline($width, $color, $chain-before, $chain-after);
}

/// プレースホルダー
/// @param {string} $color color
/// @param {nunmber} $weight font-wegiht
@mixin placeholder($color, $weight) {
  &::-webkit-input-placeholder {
    color: $color;
    font-weight: $weight;
  }
  &::-moz-placeholder {
    color: $color;
    font-weight: $weight;
  }
  &:-ms-input-placeholder {
    color: $color;
    font-weight: $weight;
  }
  &::-ms-input-placeholder {
    color: $color;
    font-weight: $weight;
  }
}

/// トリガーステータス
@mixin isOpenDrawer($className: '.is-open-drawer') {
  @at-root html#{$className} & {
    @content;
  }
}

/// アクセシビリティ対応
@mixin isAriaExpanded() {
  &[aria-expanded='true'] {
    @content;
  }
}

/// アクセシビリティ対応
@mixin isAriaSelected() {
  &[aria-selected='true'] {
    @content;
  }
}

/// 1回でもスクロールしたら
@mixin isOneScroll() {
  .js-over-once-scroll & {
    @content;
  }
}

/// ヘッダーを超えたら
@mixin isOverHeader() {
  .js-over-header & {
    @content;
  }
}

/// フッターが見えたら
@mixin isViewFooter() {
  .js-view-footer & {
    @content;
  }
}

/// スクロールの上か下か
@mixin isScrollDirection($mode: 'up') {
  $directionClass: '.js-direction-up';

  @if ($mode == 'up') {
    $directionClass: '.js-direction-up';
  } @else if ($mode == 'down') {
    $directionClass: '.js-direction-down';
  }

  #{$directionClass} & {
    @content;
  }
}

/// Edge判定
@mixin isEdge() {
  @at-root _:-ms-lang(x)::backdrop,
    & {
    @content;
  }

  @at-root html.edge & {
    @content;
  }
}

/// 縦書き
@mixin tategaki() {
  -webkit-writing-mode: vertical-rl;
  -ms-writing-mode: tb-rl;
  writing-mode: vertical-rl;
  font-feature-settings: normal; // ずれたりする
}

/// アンチエイリアス有効
@mixin font-smoothing() {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/// アンチエイリアス無効
@mixin font-smoothing-n() {
  -webkit-font-smoothing: subpixel-antialiased;
  -moz-osx-font-smoothing: auto;
}

/// otf対象のカーニング
@mixin karning() {
  font-feature-settings: 'palt' 1;
}

/// スクロールバー非表示
@mixin scrollbar-less() {
  -ms-overflow-style: none; /* IE, Edge 対応 */
  scrollbar-width: none; /* Firefox 対応 */

  &::-webkit-scrollbar {
    display: none;
  }
}
